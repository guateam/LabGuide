(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c9f5c2d"],{"17c9":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"20px"}},[a("Row",[a("Col",{attrs:{sx:24,md:24}},[a("Card",{staticStyle:{"margin-left":"2%"}},[a("Menu",{attrs:{mode:"horizontal","active-name":1},on:{"on-select":t.change_menu}},[a("MenuItem",{attrs:{name:1}},[a("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                        用户管理\n                    ")],1),a("MenuItem",{attrs:{name:2}},[a("Icon",{attrs:{type:"ios-people"}}),t._v("\n                        权限管理\n                    ")],1)],1),1===t.activate?a("div",[a("div",{staticStyle:{margin:"1%"}},[a("Row",[a("Col",{attrs:{span:8}},[a("h3",[t._v("用户管理")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:8,offset:8}},[a("Button",{attrs:{type:"success"},on:{click:t.add_confirm}},[t._v("添加学生")])],1)],1),a("Divider")],1),a("List",t._l(t.users,function(e){return a("ListItem",[a("ListItemMeta",{attrs:{avatar:e.head?e.head:t.default_head,title:e.username,description:"学号："+e.s_num}}),a("template",{slot:"action"},[a("li",[a("Button",{attrs:{type:"primary",ghost:""}},[t._v("编辑")])],1),a("li",[a("Button",{attrs:{type:"error",ghost:""},on:{click:function(a){return t.delete_confirm(e.id)}}},[t._v("清除")])],1)])],2)}),1)],1):t._e(),2===t.activate?a("div"):t._e()],1)],1)],1),a("Modal",{attrs:{width:"360","on-cancel":t.delete_cancel},model:{value:t.delete_modal.show,callback:function(e){t.$set(t.delete_modal,"show",e)},expression:"delete_modal.show"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("清除确认")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("清除该账户后将不能还原")]),a("p",[t._v("是否继续?")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:t.delete_modal.loading},on:{click:t.delete_user}},[t._v("清除")])],1)]),a("Modal",{attrs:{title:"添加用户","footer-hide":""},model:{value:t.add_modal.show,callback:function(e){t.$set(t.add_modal,"show",e)},expression:"add_modal.show"}},[a("Form",[a("FormItem",{attrs:{label:"学号",error:t.add_modal.check?"账号已存在":""}},[a("label",[a("Input",{model:{value:t.add_modal.s_num,callback:function(e){t.$set(t.add_modal,"s_num",e)},expression:"add_modal.s_num"}})],1)]),a("FormItem",{attrs:{label:"用户组"}},[a("label",[a("Select",{model:{value:t.add_modal.group,callback:function(e){t.$set(t.add_modal,"group",e)},expression:"add_modal.group"}},t._l(t.right_group,function(e){return a("Option",{attrs:{value:e.id}},[t._v(t._s(e.desc))])}),1)],1)]),a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:""},on:{click:t.add_cancel}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary"},on:{click:t.add_user}},[t._v("添加")])],1)],1)],1)],1)},d=[],n=a("a417"),s={name:"student_control_center",data:function(){return{activate:1,users:[],default_head:n["a"].host+"/static/default.jpg",delete_modal:{show:!1,loading:!1,user_id:0},add_modal:{show:!1,s_num:"",group:-1,check:!1},right_group:[]}},methods:{change_menu:function(t){this.activate=t},get_users:function(){var t=this;this.$api.user.get_users().then(function(e){1===e.data.code&&(t.users=e.data.data)})},delete_confirm:function(t){this.delete_modal.show=!0,this.delete_modal.user_id=t},delete_user:function(){var t=this;this.delete_modal.loading=!0,this.$api.user.delete_user(this.delete_modal.user_id).then(function(e){1===e.data.code&&(t.delete_cancel(),t.get_users())})},delete_cancel:function(){this.delete_modal={show:!1,loading:!1,user_id:0}},add_confirm:function(){this.add_modal.show=!0},get_right_group:function(){var t=this;this.$api.right.get_right_groups().then(function(e){1===e.data.code&&(t.right_group=e.data.data)})},add_cancel:function(){this.add_modal={show:!1,s_num:"",group:-1,check:!1}},add_user:function(){var t=this;this.add_modal.check=!1;var e={token:this.$Cookies.get("token"),s_num:this.add_modal.s_num,group:this.add_modal.group};this.$api.user.add_user(e).then(function(e){1===e.data.code?(t.add_cancel(),t.get_users()):-9===e.data.code&&(t.add_modal.check=!0)})}},mounted:function(){this.get_users(),this.get_right_group()}},i=s,r=(a("9705"),a("2877")),l=Object(r["a"])(i,o,d,!1,null,"6dd53f4c",null);e["default"]=l.exports},"7da7":function(t,e,a){},9705:function(t,e,a){"use strict";var o=a("7da7"),d=a.n(o);d.a}}]);