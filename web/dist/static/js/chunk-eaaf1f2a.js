(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaaf1f2a"],{"523d":function(e,t,a){"use strict";var s=a("7c77"),l=a.n(s);l.a},"7c77":function(e,t,a){},c1a3:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"1%"}},[a("Row",[a("Col",{staticStyle:{padding:"0.5%"},attrs:{md:6}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("头像")]),a("div",{staticClass:"head",style:{width:"100%",height:0,paddingBottom:"100%",overflow:"hidden",background:"url("+e.user.head+")"}}),a("Button",{attrs:{slot:"extra",icon:"md-create",shape:"circle",type:"text"},on:{click:function(t){e.head_editable=!0}},slot:"extra"})],1)],1),a("Col",{staticStyle:{padding:"0.5%"},attrs:{md:18}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("个人简介")]),a("div",[a("Form",{attrs:{"label-width":80,"label-position":"left",rules:e.user_rules}},[a("FormItem",{attrs:{label:"用户名"}},[a("Input",{attrs:{readonly:!e.user_editable,type:"text"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("FormItem",{attrs:{label:"手机号"}},[a("Input",{attrs:{readonly:!e.user_editable,type:"tel",placeholder:"尚未录入手机号"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("FormItem",{attrs:{label:"简介"}},[a("Input",{attrs:{readonly:!e.user_editable,type:"tel",placeholder:"这个人懒得要死，什么都没留下"},model:{value:e.user.desc,callback:function(t){e.$set(e.user,"desc",t)},expression:"user.desc"}})],1),a("FormItem",{attrs:{label:"学号"}},[a("p",[e._v(e._s(e.user.number))])]),a("FormItem",{attrs:{label:"用户组"}},[a("p",[e._v(e._s(e.user_group[e.user.user_group]))])]),a("FormItem",{style:{display:e.user_editable?"":"none"}},[a("Button",{attrs:{type:"primary"},on:{click:e.change_user}},[e._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:e.cancel_edit}},[e._v("取消")])],1)],1)],1),a("Button",{attrs:{slot:"extra",icon:"md-create",shape:"circle",type:"text"},on:{click:e.cancel_edit},slot:"extra"})],1)],1),a("Col",{staticStyle:{padding:"0.5%"},attrs:{md:6}},[a("Card",{attrs:{title:"安全中心",icon:"md-construct"}},[a("CellGroup",[a("Cell",{attrs:{title:"修改密码"}}),a("Cell",{attrs:{title:"修改人脸"}})],1)],1)],1),a("Col",{staticStyle:{padding:"0.5%"},attrs:{md:12}},[a("Card",{attrs:{title:"我的文章"}},[a("CellGroup",e._l(e.articles,function(e){return a("Cell",{attrs:{title:e.title,to:{name:"article_view",query:{id:e.id}}}})}),1)],1)],1)],1),a("Modal",{attrs:{title:"修改头像","mask-closable":!1,closable:!1},on:{"on-ok":e.change_head,"on-cancel":e.cancel_head},model:{value:e.head_editable,callback:function(t){e.head_editable=t},expression:"head_editable"}},[a("div",[a("Form",{attrs:{"label-width":80,"label-position":"left"}},[a("FormItem",{attrs:{label:"上传头像"}},[a("Upload",{attrs:{type:"drag",action:"https://www.wiseweblab.com/api/api/upload/upload_picture",name:"picture",multiple:!1,"show-upload-list":!1,"on-success":e.upload_success}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[e._v("点击上传头像")])],1)])],1),a("FormItem",{attrs:{label:"头像预览"}},[a("div",{staticStyle:{width:"70%"}},[a("div",{staticClass:"head",style:{width:"100%",height:0,paddingBottom:"100%",overflow:"hidden",backgroundSize:"cover",background:"url("+e.temp_head+")"}})])])],1)],1)])],1)},l=[],r=a("a417"),i={name:"user_view",data:function(){return{user_editable:!1,head_editable:!1,temp_head:"",user_group:["管理员","普通用户"],user_rules:{},user:{user_group:0,number:"17h00000000",username:"啦啦啦啦",phone:"1588808792",head:r["a"].host+"/api/static/default.jpg",desc:""},articles:[{title:"文章一",id:76},{title:"文章二",id:0}]}},methods:{change_head:function(){var e=this,t={token:this.$Cookies.get("token"),head:this.temp_head};this.$api.user.change_head(t).then(function(t){1===t.data.code&&(e.cancel_head(),e.get_user())})},change_user:function(){},cancel_head:function(){this.head_editable=!1,this.temp_head=""},cancel_edit:function(){this.user_editable&&this.get_user(),this.user_editable=!this.user_editable},upload_success:function(e,t,a){1===e.code&&(this.temp_head=e.data)},get_user:function(){var e=this;this.$api.user.get_info().then(function(t){1===t.data.code&&(e.user.username=t.data.data.username,e.user.desc=t.data.data.desc,e.user.user_group=t.data.data.group,e.user.number=t.data.data.snum,e.user.phone=t.data.data.phone,t.data.data.head&&(e.user.head=t.data.data.head))})}},mounted:function(){this.get_user()}},d=i,o=(a("523d"),a("2877")),n=Object(o["a"])(d,s,l,!1,null,"6d08630d",null);t["default"]=n.exports}}]);