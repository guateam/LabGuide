(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221425"],{ca1b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",{staticStyle:{"margin-top":"20px"}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("添加学生")]),n("i-form",{ref:"add_form",staticStyle:{"margin-left":"20px"},attrs:{model:t.info,rules:t.rule}},[n("form-item",{attrs:{label:"学号",prop:"snum"}},[n("i-input",{attrs:{size:"large",placeholder:"输入学生学号"},model:{value:t.info.snum,callback:function(e){t.$set(t.info,"snum",e)},expression:"info.snum"}})],1),n("form-item",[n("i-button",{staticStyle:{width:"120px"},attrs:{size:"large",type:"primary"},on:{click:t.add_student}},[t._v("添加")])],1)],1),n("i-table",{attrs:{columns:t.column,data:t.students,height:700}})],1),n("modal",{attrs:{title:"提示"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("p",{domProps:{textContent:t._s(t.alert_info)}})])],1)},o=[],i={name:"add_student",data:function(){var t=this;return{info:{snum:""},rule:{snum:[{required:!0,message:"学号不能为空",trigger:"blur"},{type:"string",min:10,message:"学号长度过短",trigger:"blur"}]},column:[{title:"学号",key:"Snum"},{title:"用户名",key:"username"},{title:"用户组",key:"group",width:150},{title:"手机号",key:"phone"},{title:"操作",key:"action",width:250,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){var e=n.row;"学生"===e.group?e.group=1:e.group=0,t.$router.push({name:"modify_student",query:{info:e}})}}},"修改信息"),e("Button",{props:{type:"error"},on:{click:function(){var e=t,a={token:t.$Cookies.get("token"),snum:n.row.Snum};t.$api.account.admin_delete_student(a).then(function(n){1===n.data.code?t.$api.account.get_all_student().then(function(t){1===t.data.code&&(e.students=t.data.data)}):-2===n.data.code?(e.modal=!0,e.alert_info="无法删除自己"):(e.modal=!0,e.alert_info="删除失败")})}}},"删除学生")])}}],students:[{Snum:"",username:"",group:"",phone:""}],alert_info:"",modal:!1}},methods:{add_student:function(){var t=this,e=this;this.$refs["add_form"].validate(function(n){if(n){var a={token:e.$Cookies.get("token"),snum:e.info.snum};t.$api.account.add_student(a).then(function(n){1===n.data.code?t.$api.account.get_all_student().then(function(t){1===t.data.code&&(e.students=t.data.data)}):-2===n.data.code&&(e.alert_info="已存在该学生",e.modal=!0)})}})},get_user:function(){var t=this;this.$api.account.get_info().then(function(e){1===e.data.code&&(t.username=e.data.data.username)})}},mounted:function(){var t=this;this.$api.account.get_all_student().then(function(e){1===e.data.code&&(t.students=e.data.data)})}},u=i,r=n("2877"),s=Object(r["a"])(u,a,o,!1,null,null,null);e["default"]=s.exports}}]);